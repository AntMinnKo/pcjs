(function(){var f;function aa(a,b){var c="";void 0===b?b=8:8<b&&(b=8);if(isNaN(a))for(;0<b--;)c="?"+c;else for(;0<b--;){var d=a&15,d=d+(0<=d&&9>=d?48:55),c=String.fromCharCode(d)+c;a>>=4}return c}function n(a){return aa(a,2)}function p(a){return aa(a,4)}function ba(a){var b=a,c=a.lastIndexOf("/");0<=c&&(b=a.substr(c+1));return b}var ca={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function da(a){return a.replace(/[&<>"']/g,function(a){return ca[a]})}function r(){return Date.now()||+new Date}
function s(a,b,c){var d;d=!0;var e=0,g=null,h=ba(a),k=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");d&&(k.onreadystatechange=function(){4===k.readyState&&(g=k.responseText,200==k.status||!k.status&&g.length&&"file:"==(window?window.location.protocol:"file:")||(e=k.status||-1),c&&(b?c.call(b,h,g,e,void 0):c(h,g,e,void 0)))});k.open("GET",a,d);k.send();d||(g=k.responseText,200!=k.status&&(e=k.status||-1),c&&(b?c.call(b,h,g,e,void 0):c(h,g,e,void 0)))}
function t(a){window&&window.alert(a)}function u(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&b.match(/(iPod|iPhone|iPad)/)&&b.match(/AppleWebKit/)||"MSIE"==a&&b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)?!0:!1}return!1}function ea(a,b,c){function d(){a-=1;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function fa(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,g=!1;a.onmousedown=function(){g||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);g=!0}}var v={init:[],show:[],exit:[]},ga=!1,w=!0;function ha(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function x(a){v.init.push(a)}
function y(a){if(w)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){t("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks.")}}function ia(a){!w&&a?(w=!0,ga&&ja("init")):w=a}function ja(a){v[a]&&y(v[a])}ha("onload",function(){ga=!0;y(v.init)});ha("onpageshow",function(){y(v.show)});ha(u("Opera")||u("iOS")?"onunload":"onbeforeunload",function(){y(v.exit)});
function z(a,b,c){this.type=a;b||(b={id:"",name:""});this.id=b.id;this.name=b.name;void 0===this.id&&(this.id="");b=this.id.indexOf(".");0<b?(this.Hd=this.id.substr(0,b),this.Gd=this.id.substr(b+1)):this.Gd=this.id;this[a]=c;this.o={Ub:!1,Ta:!1,vc:!1,C:!1,Ua:!1};this.xc=null;this.o.Ua=!1;this.s={};this.m=null;A[A.length]=this}var ka=void 0;if(window){ka||(ka=window.location.search.substr(1));for(var la,ma=/\+/g,na=/([^&=]+)=?([^&]*)/g;la=na.exec(ka);)la[1].replace(ma," "),la[2].replace(ma," ")}
function oa(){var a=z.prototype;function b(){}if(window){if(!a)throw new TypeError;if(Object.create)return Object.create(a);var c=typeof a;if("object"!==c&&"function"!==c)throw new TypeError;}b.prototype=a;return new b}function B(a){a.prototype=oa()}var A=[];function C(a,b){if(void 0!==a){var c;b&&0<(c=b.indexOf("."))&&(a=b.substr(0,c+1)+a);for(c=0;c<A.length;c++)if(A[c].id===a)return A[c]}return null}
function D(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("({"+a+"})")}catch(c){t(c.message+" ("+a+")")}return b}
function E(a,b){var c,d;d=F(b.parentNode,"c1pjs-control");for(c=0;c<d.length;c++){var e,g;g=d[c].childNodes;for(e=0;e<g.length;e++){var h=g[e];if(h.nodeType===window.document.ELEMENT_NODE){var k=h.getAttribute("class");if(k){var l,m;m=k.split(" ");for(l=0;l<m.length;l++)switch(k=m[l],k){case "c1pjs-input":case "c1pjs-output":(m=D(h))&&m.binding&&a.J(k,m.type,m.binding,h),m=[]}}}}}}
function F(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
z.prototype={toString:function(){return this.name?this.name:this.id||this.type},J:function(a,b,c,d){switch(c){case "clear":return this.s[c]||(this.s[c]=d,d.onclick=function(a){return function(){a.s.print&&(a.s.print.value="")}}(this)),!0;case "print":return this.s[c]||(this.tc=this.s[c]=d,d.value="",this.i=function(a){return function(b,c){8192<a.value.length&&(a.value=a.value.substr(a.value.length-4096));a.value+=(void 0!==c?c+": ":"")+(b||"")+"\n";a.scrollTop=a.scrollHeight}}(d),this.Yb=function(a,
b,c){this.i(a,"notice",c)}),!0;default:return!1}},log:function(){},i:function(){},status:function(a){this.i(this.Gd+": "+a)},Yb:function(a,b){b||t(a)},Q:function(a){this.o.Ua||(this.o.Ub=!1!==a,this.o.Ub&&(this.name&&this.log("ready"),a=this.xc,this.xc=null,a&&a()))}};function H(a,b){if(a.o.vc)return a.o.Ta&&(a.o.Ta=!1),a.o.vc=!1;if(a.o.Ua)return a.i(a.toString()+" error"),!1;a.o.Ta=b;return a.o.Ta}function I(a,b){a.o.Ta&&(b?a.o.vc=!0:void 0===b&&a.i(a.toString()+" busy"));return a.o.Ta}
function J(a,b){b&&(a.o.Ub?b():a.xc=b);return a.o.Ub}function K(a,b){a.o.Ua=!0;a.Yb("Fatal error: "+b)}window&&!window.document.ELEMENT_NODE&&(window.document.ELEMENT_NODE=1);function pa(a){z.call(this,"C1PPanel",a);this.o.C=!1}B(pa);pa.prototype.J=function(a,b,c,d){return this.O&&this.O.J(a,b,c,d)||this.l&&this.l.J(a,b,c,d)||this.H&&this.H.J(a,b,c,d)||this.m&&this.m.J(a,b,c,d)?!0:z.prototype.J.call(this,a,b,c,d)};
pa.prototype.ca=function(a,b){a&&!this.o.C&&(this.o.C=!0,this.O=b,this.l=L(b,"cpu"),this.H=L(b,"keyboard"),this.m=L(b,"debugger"),qa())};function qa(){for(var a=!1,b=F(window.document,"c1pjs","panel"),c=0;c<b.length;c++){var d=b[c],e=D(d),g=C(e.id);g||(a=!0,g=new pa(e));E(g,d);a&&g.Q()}}x(qa);
function ra(a){z.call(this,"C1PCPU",a);sa(this);this.o.C=!1;this.o.ha=!1;this.Dd=a.autoStart;this.Ib=0;this.rd=1;this.Na=2;this.speed=this.Ib;this.qb=1E6;this.Dc=this.Fc=30;this.Cc=5;this.Rf=1;this.nb=8;this.xd=["Slow","Fast","Max"];this.Ef=["("+this.Rf+"Mhz)","(up to "+this.nb+"Mhz)","(unlimited)"];this.Da=[];this.ta=[];this.oc=65536;this.pc=0;this.Mb=65536;this.Nb=0;this.re=128;this.se=64;this.ne=16;this.pe=8;this.qe=4;this.te=2;this.oe=1;this.Af=65532;this.Hb=32;this.hc=2;this.xf=0;this.qd=1;this.u=
[this.Eg,this.Yh,this.Pi,this.j,this.j,this.$h,this.ug,this.j,this.ci,this.Xh,this.tg,this.j,this.j,this.Uh,this.rg,this.j,this.Dg,this.Zh,this.j,this.j,this.j,this.ai,this.vg,this.j,this.Hg,this.Wh,this.j,this.j,this.j,this.Vh,this.sg,this.j,this.vh,this.ng,this.j,this.j,this.Ag,this.pg,this.ii,this.j,this.ei,this.mg,this.hi,this.j,this.zg,this.jg,this.fi,this.j,this.Bg,this.og,this.j,this.j,this.j,this.qg,this.ji,this.j,this.zi,this.lg,this.j,this.j,this.j,this.kg,this.gi,this.j,this.pi,this.jh,
this.j,this.j,this.j,this.lh,this.Rh,this.j,this.bi,this.ih,this.Qh,this.j,this.uh,this.fh,this.Oh,this.j,this.Fg,this.kh,this.j,this.j,this.j,this.mh,this.Sh,this.j,this.Jg,this.hh,this.j,this.j,this.j,this.gh,this.Ph,this.j,this.qi,this.Wd,this.j,this.j,this.j,this.Yd,this.ni,this.j,this.di,this.Vd,this.mi,this.j,this.th,this.Sd,this.ki,this.j,this.Gg,this.Xd,this.j,this.j,this.j,this.Zd,this.oi,this.j,this.Bi,this.Ud,this.j,this.j,this.j,this.Td,this.li,this.j,this.j,this.Fi,this.j,this.j,this.Ni,
this.Hi,this.Ki,this.j,this.eh,this.j,this.Ti,this.j,this.Mi,this.Ci,this.Ji,this.j,this.wg,this.Gi,this.j,this.j,this.Oi,this.Ii,this.Li,this.j,this.Vi,this.Ei,this.Ui,this.j,this.j,this.Di,this.j,this.j,this.Lh,this.Ah,this.Gh,this.j,this.Mh,this.Ch,this.Hh,this.j,this.Ri,this.zh,this.Qi,this.j,this.Jh,this.wh,this.Eh,this.j,this.xg,this.Bh,this.j,this.j,this.Nh,this.Dh,this.Ih,this.j,this.Kg,this.yh,this.Si,this.j,this.Kh,this.xh,this.Fh,this.j,this.Xg,this.Pg,this.j,this.j,this.Yg,this.Rg,this.ah,
this.j,this.sh,this.Og,this.dh,this.j,this.Wg,this.Lg,this.Zg,this.j,this.Cg,this.Qg,this.j,this.j,this.j,this.Sg,this.bh,this.j,this.Ig,this.Ng,this.j,this.j,this.j,this.Mg,this.$g,this.j,this.Ug,this.de,this.j,this.j,this.Vg,this.fe,this.ph,this.j,this.rh,this.ce,this.Th,this.j,this.Tg,this.$d,this.nh,this.j,this.yg,this.ee,this.j,this.j,this.j,this.ge,this.qh,this.j,this.Ai,this.be,this.j,this.j,this.j,this.ae,this.oh,this.j];this.Df=[7,6,0,0,0,3,5,0,3,2,2,0,0,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,
7,0,3,6,0,0,3,3,5,0,4,2,2,0,4,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0,6,6,0,0,0,3,5,0,3,2,2,0,3,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0,6,6,0,0,0,3,5,0,4,2,2,0,5,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0,0,6,0,0,3,3,3,0,2,0,2,0,4,4,4,0,2,5,0,0,4,4,4,0,2,4,2,0,0,4,0,0,2,6,2,0,3,3,3,0,2,2,2,0,4,4,4,0,2,5,0,0,4,4,4,0,2,4,2,0,4,4,4,0,2,6,0,0,3,3,5,0,2,2,2,0,4,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0,2,6,0,0,3,3,5,0,2,2,2,0,4,4,6,0,2,5,0,0,0,4,6,0,2,4,0,0,0,4,7,0]}B(ra);f=ra.prototype;
f.reset=function(a){this.o.ha&&this.U();sa(this);var b=this.Af;this.d=this.a[b]|this.a[b+1]<<8;this.o.Ua=!1;this.m?this.m.reset():a&&(!0===this.Dd||null===this.Dd&&!this.m&&void 0===this.s.run)&&this.za()};
f.J=function(a,b,c,d){a=!1;switch(c){case "run":this.s[c]=d;d.onclick=function(a){return function(){a.o.ha?a.U():a.za()}}(this);a=!0;break;case "A":case "X":case "Y":case "S":case "PC":case "C":case "Z":case "I":case "D":case "B":case "V":case "N":case "speed":this.s[c]=d;a=!0;break;case "setSpeed":this.s[c]=d,d.onclick=function(a){return function(){M(a,a.speed>=a.Na?a.Ib:a.speed+1,!0)}}(this),a=!0}return a};
f.W=function(a,b,c){this.a=a;this.aa=b;this.sc=c-b+1;this.$a=this.aa+this.sc;this.aa?t("unsupported CPU address buffer offset ("+this.aa+")"):this.Q()};f.ca=function(a,b){if(a&&!this.o.C){this.O=b;(this.m=L(b,"debugger"))&&this.m.Of();var c=L(b,"video");c&&(this.uc=function(a){return function(){ta(a)}}(c),this.X=function(a){return function(){a.X()}}(c));this.o.C=!0;this.reset(!0);this.update()}};function ua(a,b,c,d,e){0>va(a.Da,b,c,d,e)&&(a.oc>b&&(a.oc=b),a.pc<c&&(a.pc=c),a.Da.push([b,c,d,e]))}
function wa(a,b,c){for(var d=0;d<a.Da.length;d++)b>=a.Da[d][0]&&b<=a.Da[d][1]&&a.Da[d][3].call(a.Da[d][2],b,c)}function N(a,b,c,d,e){0>va(a.ta,b,c,d,e)&&(a.Mb>b&&(a.Mb=b),a.Nb<c&&(a.Nb=c),a.ta.push([b,c,d,e]))}function xa(a,b,c){for(var d=0;d<a.ta.length;d++)b>=a.ta[d][0]&&b<=a.ta[d][1]&&a.ta[d][3].call(a.ta[d][2],b,c)}function va(a,b,c,d,e){for(var g=0;g<a.length;g++)if(a[g][0]==b&&a[g][1]==c&&a[g][2]==d&&a[g][3]==e)return g;return-1}
function M(a,b,c){void 0!==b&&(a.speed=b,a.s.setSpeed&&(a.s.setSpeed.innerHTML=a.xd[2<=b?0:b+1]),a.i("running at "+a.xd[b].toLowerCase()+" speed "+a.Ef[b]),c&&a.X());a.Za=0;a.Id=r();ya(a)}f.uc=function(){};f.X=function(){};function O(a,b,c,d){void 0!==a.s[b]&&(void 0===d&&(d=1),c="0000"+c.toString(16),a.s[b].innerHTML=c.slice(c.length-d).toUpperCase())}
function za(a){O(a,"A",a.e,2);O(a,"X",a.n,2);O(a,"Y",a.q,2);var b=Aa(a);O(a,"C",b&a.oe?1:0);O(a,"Z",b&a.te?1:0);O(a,"I",b&a.qe?1:0);O(a,"D",b&a.pe?1:0);O(a,"B",b&a.ne?1:0);O(a,"V",b&a.se?1:0);O(a,"N",b&a.re?1:0);O(a,"S",a.r,4);O(a,"PC",a.d,4);a.s.speed&&a.va&&(a.s.speed.innerHTML=a.va.toFixed(1)+"Mhz")}
function ya(a,b){var c=a.Fc;c<a.Dc&&(c=a.Dc);c<a.Cc&&(c=a.Cc);var d=1;b&&a.speed>a.Ib&&a.va&&(d=a.va);d>a.nb&&a.speed<a.Na&&(d=a.nb);a.Tf=Math.round(1E3/a.Fc);a.Xb=Math.floor(a.qb/c*d);a.yc=Math.floor(a.qb/a.Fc*d);a.Kd=Math.floor(a.qb/a.Dc*d);a.Jd=Math.floor(a.qb/a.Cc*d);b||(a.Xa=a.yc,a.pb=a.Kd,a.ob=a.Jd);a.Bc=0}
function Ba(a){var b=r(),c=a.Tf;a.rb&&(c=Math.round(c*a.rb/a.yc));c-=b-a.Wf;if(b-=a.Id)a.va=Math.round(a.Za/(100*b))/10,864E5<=b&&M(a);0>c?c=0:a.speed==a.rd?a.va<=a.nb&&(c=0):a.speed==a.Na&&(c=0);a.Bc+=a.rb;return c}
f.za=function(){if(H(this,!0)){this.o.ha||(M(this),this.O&&this.O.start(),this.o.ha=!0,this.s.run&&(this.s.run.innerHTML="Halt"),this.X());this.Bc>=this.qb&&ya(this,!0);this.rb=0;this.Wf=r();try{do{this.step(this.Xb);var a=this.wa-this.G;this.Za+=a;this.rb+=a;this.wa=this.G=0;this.pb-=this.Xb;0>=this.pb&&(this.pb+=this.Kd,this.uc());this.ob-=this.Xb;0>=this.ob&&(this.ob+=this.Jd,za(this));this.Xa-=this.Xb;if(0>=this.Xa){this.Xa+=this.yc;break}}while(this.o.ha)}catch(b){this.U();this.update();H(this,
!1);K(this,b.message);return}setTimeout(function(a){return function(){a.za()}}(this),Ba(this))}else this.update(),this.O&&this.O.stop(this.Id,this.Za)};
f.step=function(a){var b=!0;this.b=this.h=-1;var c;if(c=a)if(c=this.m)c=this.m,c=0<c.sa.length||0<c.Ca.length||0<c.Fa.length;this.wa=this.G=a;do{a=this.a[this.d];var d;if(d=c){d=this.m;var e=a,g=!1;Ca(d,this.d,d.sa,"exec")?g=!0:(d.Qa++,d.ga[e][1]++,d.Ea[d.lb++]=d.l.d,d.lb>=d.Ea.length&&(d.lb=0));d=!!g}if(d){b=void 0;this.U();break}this.d++;this.u[a].call(this);if(0<=this.b){this.b>=this.oc&&this.b<=this.pc&&wa(this,this.b,this.d);if(d=c)d=this.m,e=!1,Ca(d,this.b,d.Ca,"read")&&(e=!0),d=!!e;if(d){b=
!1;this.U();break}this.b=-1}else if(0<=this.h){this.h>=this.Mb&&this.h<=this.Nb&&xa(this,this.h,this.d);if(d=c){d=this.m;var e=this.h,g=this.a[this.h],h=!1;(g&255)!=g&&(d.i("invalid value at "+p(e)+": "+g),h=!0);Ca(d,e,d.Fa,"write")&&(h=!0);d=!!h}if(d){b=!1;this.U();break}this.h=-1}this.G-=this.Df[a]}while(0<this.G);return b};function Da(a){a.Xa=0;a.wa-=a.G;a.G=0}f.U=function(){I(this,!0);this.wa-=this.G;this.G=0;this.o.ha&&(this.o.ha=!1,this.s.run&&(this.s.run.innerHTML="Run"))};
f.update=function(){this.uc();za(this)};function Ea(a){return a.o.ha?a.Za+a.wa-a.G:0}f.I=function(a){return this.a[a]};f.P=function(a,b){this.a[a]=b};function Aa(a){var b=a.c&256?1:0,b=b|(a.g&255?0:2),b=b|((a.v&255^a.w^a.v>>1)&128?64:0),b=b|(a.f&128?128:0);return a.A&60|b}
function Fa(a){a.A|=8;a.u[97]=a.fg;a.u[101]=a.hg;a.u[105]=a.eg;a.u[109]=a.bg;a.u[113]=a.gg;a.u[117]=a.ig;a.u[121]=a.dg;a.u[125]=a.cg;a.u[225]=a.vi;a.u[229]=a.xi;a.u[233]=a.ui;a.u[237]=a.ri;a.u[241]=a.wi;a.u[245]=a.yi;a.u[249]=a.ti;a.u[253]=a.si}function Ga(a){a.A&=-9;a.u[97]=a.Wd;a.u[101]=a.Yd;a.u[105]=a.Vd;a.u[109]=a.Sd;a.u[113]=a.Xd;a.u[117]=a.Zd;a.u[121]=a.Ud;a.u[125]=a.Td;a.u[225]=a.de;a.u[229]=a.fe;a.u[233]=a.ce;a.u[237]=a.$d;a.u[241]=a.ee;a.u[245]=a.ge;a.u[249]=a.be;a.u[253]=a.ae}
function P(a,b,c){var d=a.c&256?1:0,e=(b&15)+(c&15)+d;10<=e&&(e=e+6&15|16);e+=(b&240)+(c&240);a.w=b^c;a.v=e;a.f=e&255;160<=e&&(e+=96);512<=e&&(e-=256);a.c=e;a.g=b+c+d&255;a.G--;return e&255}function Q(a,b,c){var d=a.c&256?0:1,e=(b&15)-(c&15)-d;0>e&&(e=(e-6&15)-16);e+=(b&240)-(c&240);0>e&&(e-=96);a.f=a.g=(a.c=b-c-d)&255;a.w=b^c;a.v=a.c;a.c^=256;a.G--;return e&255}function sa(a){a.e=0;a.n=0;a.q=0;a.r=256;a.A=0;a.f=0;a.g=0;a.w=0;a.v=0;a.c=0;a.d=0;a.b=-1;a.h=-1;a.va=0;a.Za=a.wa=a.G=0}
f.Eg=function(){this.d++;this.a[this.r--]=this.d>>8;this.r|=256;this.a[this.r--]=this.d&255;this.r|=256;this.A|=16;this.A=Aa(this);this.a[this.r--]=this.A;this.r|=256;this.A&=239;this.b=65534;this.d=this.a[this.b]|this.a[this.b+1]<<8};f.Yh=function(){this.b=this.a[this.d++]+this.n&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.f=this.g=this.e|=this.a[this.b]};f.$h=function(){this.b=this.a[this.d++];this.f=this.g=this.e|=this.a[this.b]};
f.ug=function(){this.h=this.a[this.d++];this.c=this.a[this.h]<<1;this.f=this.g=this.a[this.h]=this.c&255};f.ci=function(){this.A=Aa(this);this.a[this.r--]=this.A;this.r|=256};f.Xh=function(){this.b=this.d++;this.f=this.g=this.e|=this.a[this.b]};f.tg=function(){this.c=this.e<<1;this.f=this.g=this.e=this.c&255};f.Uh=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.e|=this.a[this.b]};
f.rg=function(){this.h=this.a[this.d++]|this.a[this.d++]<<8;this.c=this.a[this.h]<<1;this.f=this.g=this.a[this.h]=this.c&255};f.Dg=function(){this.d+=(this.f&128?0:(this.G--,this.a[this.d]<<24>>24))+1};f.Zh=function(){this.b=this.a[this.d++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.q;this.f=this.g=this.e|=this.a[this.b]};f.ai=function(){this.b=this.a[this.d++]+this.n&255;this.f=this.g=this.e|=this.a[this.b]};
f.vg=function(){this.h=this.a[this.d++]+this.n&255;this.c=this.a[this.h]<<1;this.f=this.g=this.a[this.h]=this.c&255};f.Hg=function(){this.c=0};f.Wh=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.f=this.g=this.e|=this.a[this.b]};f.Vh=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.f=this.g=this.e|=this.a[this.b]};f.sg=function(){this.h=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.c=this.a[this.h]<<1;this.f=this.g=this.a[this.h]=this.c&255};
f.vh=function(){this.b=this.d++;this.a[this.r--]=this.d>>8;this.r|=256;this.a[this.r--]=this.d&255;this.r|=256;this.d=this.a[this.b]|this.a[this.b+1]<<8};f.ng=function(){this.b=this.a[this.d++]+this.n&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.f=this.g=this.e&=this.a[this.b]};f.Ag=function(){this.b=this.a[this.d++];this.g=this.e&this.a[this.b];this.f=this.f&127|this.a[this.b]&128;this.v=0;this.w=this.a[this.b]&64?128:0};f.pg=function(){this.b=this.a[this.d++];this.f=this.g=this.e&=this.a[this.b]};
f.ii=function(){this.h=this.a[this.d++];this.c=this.c&65280|this.a[this.h];this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.f=this.g=this.a[this.h]=this.c&255};f.ei=function(){this.r=this.r+1&255|256;this.A=this.a[this.r];this.c=this.A&1?256:0;this.g=this.A&2?0:1;this.f=this.A&128;this.v=0;this.w=this.A&64?128:0};f.mg=function(){this.b=this.d++;this.f=this.g=this.e&=this.a[this.b]};
f.hi=function(){this.c=this.c&65280|this.e;this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.f=this.g=this.e=this.c&255};f.zg=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.g=this.e&this.a[this.b];this.f=this.f&127|this.a[this.b]&128;this.v=0;this.w=this.a[this.b]&64?128:0};f.jg=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.e&=this.a[this.b]};
f.fi=function(){this.h=this.a[this.d++]|this.a[this.d++]<<8;this.c=this.c&65280|this.a[this.h];this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.f=this.g=this.a[this.h]=this.c&255};f.Bg=function(){this.d+=(this.f&128?(this.G--,this.a[this.d]<<24>>24):0)+1};f.og=function(){this.b=this.a[this.d++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.q;this.f=this.g=this.e&=this.a[this.b]};f.qg=function(){this.b=this.a[this.d++]+this.n&255;this.f=this.g=this.e&=this.a[this.b]};
f.ji=function(){this.h=this.a[this.d++]+this.n&255;this.c=this.c&65280|this.a[this.h];this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.f=this.g=this.a[this.h]=this.c&255};f.zi=function(){this.c=256};f.lg=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.f=this.g=this.e&=this.a[this.b]};f.kg=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.f=this.g=this.e&=this.a[this.b]};
f.gi=function(){this.h=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.c=this.c&65280|this.a[this.h];this.c<<=1;this.c=this.c&65534|(this.c&512?1:0);this.f=this.g=this.a[this.h]=this.c&255};f.pi=function(){this.r=this.r+1&255|256;this.A=this.a[this.r];this.c=this.A&1?256:0;this.g=this.A&2?0:1;this.f=this.A&128;this.v=0;this.w=this.A&64?128:0;this.r=this.r+2&255|256;this.d=this.a[this.r-1|256]|this.a[this.r]<<8};
f.jh=function(){this.b=this.a[this.d++]+this.n&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.f=this.g=this.e^=this.a[this.b]};f.lh=function(){this.b=this.a[this.d++];this.f=this.g=this.e^=this.a[this.b]};f.Rh=function(){this.h=this.a[this.d++];this.c=this.c&65279|(this.a[this.h]&1?256:0);this.a[this.h]=(this.c=this.c&65280|this.a[this.h]>>1)&255;this.f=this.g=this.c&255};f.bi=function(){this.a[this.r--]=this.e;this.r|=256};f.ih=function(){this.b=this.d++;this.f=this.g=this.e^=this.a[this.b]};
f.Qh=function(){this.c=this.c&65279|(this.e&1?256:0);this.e=(this.c=this.c&65280|this.e>>1)&255;this.f=this.g=this.c&255};f.uh=function(){this.b=this.d;this.d=this.a[this.b]|this.a[this.b+1]<<8};f.fh=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.e^=this.a[this.b]};f.Oh=function(){this.h=this.a[this.d++]|this.a[this.d++]<<8;this.c=this.c&65279|(this.a[this.h]&1?256:0);this.a[this.h]=(this.c=this.c&65280|this.a[this.h]>>1)&255;this.f=this.g=this.c&255};
f.Fg=function(){this.d+=((this.v&255^this.w^this.v>>1)&128?0:(this.G--,this.a[this.d]<<24>>24))+1};f.kh=function(){this.b=this.a[this.d++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.q;this.f=this.g=this.e^=this.a[this.b]};f.mh=function(){this.b=this.a[this.d++]+this.n&255;this.f=this.g=this.e^=this.a[this.b]};f.Sh=function(){this.h=this.a[this.d++]+this.n&255;this.c=this.c&65279|(this.a[this.h]&1?256:0);this.a[this.h]=(this.c=this.c&65280|this.a[this.h]>>1)&255;this.f=this.g=this.c&255};
f.Jg=function(){this.A&=251};f.hh=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.f=this.g=this.e^=this.a[this.b]};f.gh=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.f=this.g=this.e^=this.a[this.b]};f.Ph=function(){this.h=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.c=this.c&65279|(this.a[this.h]&1?256:0);this.a[this.h]=(this.c=this.c&65280|this.a[this.h]>>1)&255;this.f=this.g=this.c&255};
f.qi=function(){this.r=this.r+2&255|256;this.d=(this.a[this.r-1|256]|this.a[this.r]<<8)+1};f.Wd=function(){this.b=this.a[this.d++]+this.n&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.c=this.e+this.a[this.b]+(this.c&256?1:0);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255};f.fg=function(){this.b=this.a[this.d++]+this.n&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.e=P(this,this.e,this.a[this.b])};
f.Yd=function(){this.b=this.a[this.d++];this.c=this.e+this.a[this.b]+(this.c&256?1:0);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255};f.hg=function(){this.b=this.a[this.d++];this.e=P(this,this.e,this.a[this.b])};f.ni=function(){this.h=this.a[this.d++];this.c=this.c&65280|this.a[this.h];this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.f=this.g=this.a[this.h]=this.c&255};f.di=function(){this.r=this.r+1&255|256;this.f=this.g=this.e=this.a[this.r]};
f.Vd=function(){this.b=this.d++;this.c=this.e+this.a[this.b]+(this.c&256?1:0);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255};f.eg=function(){this.b=this.d++;this.e=P(this,this.e,this.a[this.b])};f.mi=function(){this.c=this.c&65280|this.e;this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.f=this.g=this.e=this.c&255};f.th=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.d=this.a[this.b]|this.a[this.b+1]<<8};
f.Sd=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.c=this.e+this.a[this.b]+(this.c&256?1:0);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255};f.bg=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.e=P(this,this.e,this.a[this.b])};f.ki=function(){this.h=this.a[this.d++]|this.a[this.d++]<<8;this.c=this.c&65280|this.a[this.h];this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.f=this.g=this.a[this.h]=this.c&255};
f.Gg=function(){this.d+=((this.v&255^this.w^this.v>>1)&128?(this.G--,this.a[this.d]<<24>>24):0)+1};f.Xd=function(){this.b=this.a[this.d++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.q;this.c=this.e+this.a[this.b]+(this.c&256?1:0);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255};f.gg=function(){this.b=this.a[this.d++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.q;this.e=P(this,this.e,this.a[this.b])};
f.Zd=function(){this.b=this.a[this.d++]+this.n&255;this.c=this.e+this.a[this.b]+(this.c&256?1:0);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255};f.ig=function(){this.b=this.a[this.d++]+this.n&255;this.e=P(this,this.e,this.a[this.b])};f.oi=function(){this.h=this.a[this.d++]+this.n&255;this.c=this.c&65280|this.a[this.h];this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.f=this.g=this.a[this.h]=this.c&255};f.Bi=function(){this.A|=4};
f.Ud=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.c=this.e+this.a[this.b]+(this.c&256?1:0);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255};f.dg=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.e=P(this,this.e,this.a[this.b])};f.Td=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.c=this.e+this.a[this.b]+(this.c&256?1:0);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255};
f.cg=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.e=P(this,this.e,this.a[this.b])};f.li=function(){this.h=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.c=this.c&65280|this.a[this.h];this.c=this.c&65023|(this.c&1?512:0);this.c>>=1;this.f=this.g=this.a[this.h]=this.c&255};f.Fi=function(){this.h=this.a[this.d++]+this.n&255;this.h=this.a[this.h]|this.a[this.h+1]<<8;this.a[this.h]=this.e};f.Ni=function(){this.h=this.a[this.d++];this.a[this.h]=this.q};
f.Hi=function(){this.h=this.a[this.d++];this.a[this.h]=this.e};f.Ki=function(){this.h=this.a[this.d++];this.a[this.h]=this.n};f.eh=function(){this.f=this.g=this.q=this.q-1&255};f.Ti=function(){this.f=this.g=this.e=this.n};f.Mi=function(){this.h=this.a[this.d++]|this.a[this.d++]<<8;this.a[this.h]=this.q};f.Ci=function(){this.h=this.a[this.d++]|this.a[this.d++]<<8;this.a[this.h]=this.e};f.Ji=function(){this.h=this.a[this.d++]|this.a[this.d++]<<8;this.a[this.h]=this.n};
f.wg=function(){this.d+=(this.c&256?0:(this.G--,this.a[this.d]<<24>>24))+1};f.Gi=function(){this.h=this.a[this.d++];this.h=(this.a[this.h]|this.a[this.h+1]<<8)+this.q;this.a[this.h]=this.e};f.Oi=function(){this.h=this.a[this.d++]+this.n&255;this.a[this.h]=this.q};f.Ii=function(){this.h=this.a[this.d++]+this.n&255;this.a[this.h]=this.e};f.Li=function(){this.h=this.a[this.d++]+this.q&255;this.a[this.h]=this.n};f.Vi=function(){this.f=this.g=this.e=this.q};
f.Ei=function(){this.h=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.a[this.h]=this.e};f.Ui=function(){this.r=this.n|256};f.Di=function(){this.h=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.a[this.h]=this.e};f.Lh=function(){this.b=this.d++;this.f=this.g=this.q=this.a[this.b]};f.Ah=function(){this.b=this.a[this.d++]+this.n&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.f=this.g=this.e=this.a[this.b]};f.Gh=function(){this.b=this.d++;this.f=this.g=this.n=this.a[this.b]};
f.Mh=function(){this.b=this.a[this.d++];this.f=this.g=this.q=this.a[this.b]};f.Ch=function(){this.b=this.a[this.d++];this.f=this.g=this.e=this.a[this.b]};f.Hh=function(){this.b=this.a[this.d++];this.f=this.g=this.n=this.a[this.b]};f.Ri=function(){this.f=this.g=this.q=this.e};f.zh=function(){this.b=this.d++;this.f=this.g=this.e=this.a[this.b]};f.Qi=function(){this.f=this.g=this.n=this.e};f.Jh=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.q=this.a[this.b]};
f.wh=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.e=this.a[this.b]};f.Eh=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.n=this.a[this.b]};f.xg=function(){this.d+=(this.c&256?(this.G--,this.a[this.d]<<24>>24):0)+1};f.Bh=function(){this.b=this.a[this.d++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.q;this.f=this.g=this.e=this.a[this.b]};f.Nh=function(){this.b=this.a[this.d++]+this.n&255;this.f=this.g=this.q=this.a[this.b]};
f.Dh=function(){this.b=this.a[this.d++]+this.n&255;this.f=this.g=this.e=this.a[this.b]};f.Ih=function(){this.b=this.a[this.d++]+this.q&255;this.f=this.g=this.n=this.a[this.b]};f.Kg=function(){this.w=this.v=0};f.yh=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.f=this.g=this.e=this.a[this.b]};f.Si=function(){this.f=this.g=this.n=this.r&255};f.Kh=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.f=this.g=this.q=this.a[this.b]};
f.xh=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.f=this.g=this.e=this.a[this.b]};f.Fh=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.f=this.g=this.n=this.a[this.b]};f.Xg=function(){this.b=this.d++;this.f=this.g=this.c=this.q-this.a[this.b];this.c^=256};f.Pg=function(){this.b=this.a[this.d++]+this.n&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.f=this.g=this.c=this.e-this.a[this.b];this.c^=256};
f.Yg=function(){this.b=this.a[this.d++];this.f=this.g=this.c=this.q-this.a[this.b];this.c^=256};f.Rg=function(){this.b=this.a[this.d++];this.f=this.g=this.c=this.e-this.a[this.b];this.c^=256};f.ah=function(){this.h=this.a[this.d++];this.f=this.g=this.a[this.h]=this.a[this.h]-1&255};f.sh=function(){this.f=this.g=this.q=this.q+1&255};f.Og=function(){this.b=this.d++;this.f=this.g=this.c=this.e-this.a[this.b];this.c^=256};f.dh=function(){this.f=this.g=this.n=this.n-1&255};
f.Wg=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.c=this.q-this.a[this.b];this.c^=256};f.Lg=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.c=this.e-this.a[this.b];this.c^=256};f.Zg=function(){this.h=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.a[this.h]=this.a[this.h]-1&255};f.Cg=function(){this.d+=(this.g&255?(this.G--,this.a[this.d]<<24>>24):0)+1};
f.Qg=function(){this.b=this.a[this.d++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.q;this.f=this.g=this.c=this.e-this.a[this.b];this.c^=256};f.Sg=function(){this.b=this.a[this.d++]+this.n&255;this.f=this.g=this.c=this.e-this.a[this.b];this.c^=256};f.bh=function(){this.h=this.a[this.d++]+this.n&255;this.f=this.g=this.a[this.h]=this.a[this.h]-1&255};f.Ig=function(){Ga(this)};
f.Ng=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.f=this.g=this.c=this.e-this.a[this.b];this.c^=256};f.Mg=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.f=this.g=this.c=this.e-this.a[this.b];this.c^=256};f.$g=function(){this.h=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.f=this.g=this.a[this.h]=this.a[this.h]-1&255};f.Ug=function(){this.b=this.d++;this.f=this.g=this.c=this.n-this.a[this.b];this.c^=256};
f.de=function(){this.b=this.a[this.d++]+this.n&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.c=this.e-this.a[this.b]-(this.c&256?0:1);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255;this.c^=256};f.vi=function(){this.b=this.a[this.d++]+this.n&255;this.b=this.a[this.b]|this.a[this.b+1]<<8;this.e=Q(this,this.e,this.a[this.b])};f.Vg=function(){this.b=this.a[this.d++];this.f=this.g=this.c=this.n-this.a[this.b];this.c^=256};
f.fe=function(){this.b=this.a[this.d++];this.c=this.e-this.a[this.b]-(this.c&256?0:1);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255;this.c^=256};f.xi=function(){this.b=this.a[this.d++];this.e=Q(this,this.e,this.a[this.b])};f.ph=function(){this.h=this.a[this.d++];this.f=this.g=this.a[this.h]=this.a[this.h]+1&255};f.rh=function(){this.f=this.g=this.n=this.n+1&255};
f.ce=function(){this.b=this.d++;this.c=this.e-this.a[this.b]-(this.c&256?0:1);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255;this.c^=256};f.ui=function(){this.b=this.d++;this.e=Q(this,this.e,this.a[this.b])};f.Th=function(){};f.Tg=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.c=this.n-this.a[this.b];this.c^=256};
f.$d=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.c=this.e-this.a[this.b]-(this.c&256?0:1);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255;this.c^=256};f.ri=function(){this.b=this.a[this.d++]|this.a[this.d++]<<8;this.e=Q(this,this.e,this.a[this.b])};f.nh=function(){this.h=this.a[this.d++]|this.a[this.d++]<<8;this.f=this.g=this.a[this.h]=this.a[this.h]+1&255};f.yg=function(){this.d+=(this.g&255?0:(this.G--,this.a[this.d]<<24>>24))+1};
f.ee=function(){this.b=this.a[this.d++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.q;this.c=this.e-this.a[this.b]-(this.c&256?0:1);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255;this.c^=256};f.wi=function(){this.b=this.a[this.d++];this.b=(this.a[this.b]|this.a[this.b+1]<<8)+this.q;this.e=Q(this,this.e,this.a[this.b])};
f.ge=function(){this.b=this.a[this.d++]+this.n&255;this.c=this.e-this.a[this.b]-(this.c&256?0:1);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255;this.c^=256};f.yi=function(){this.b=this.a[this.d++]+this.n&255;this.e=Q(this,this.e,this.a[this.b])};f.qh=function(){this.h=this.a[this.d++]+this.n&255;this.f=this.g=this.a[this.h]=this.a[this.h]+1&255};f.Ai=function(){Fa(this)};
f.be=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.c=this.e-this.a[this.b]-(this.c&256?0:1);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255;this.c^=256};f.ti=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.q;this.e=Q(this,this.e,this.a[this.b])};
f.ae=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.c=this.e-this.a[this.b]-(this.c&256?0:1);this.w=this.e^this.a[this.b];this.v=this.c;this.f=this.g=this.e=this.c&255;this.c^=256};f.si=function(){this.b=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.e=Q(this,this.e,this.a[this.b])};f.oh=function(){this.h=(this.a[this.d++]|this.a[this.d++]<<8)+this.n;this.f=this.g=this.a[this.h]=this.a[this.h]+1&255};
f.Pi=function(){var a;a=this.a[this.d++];switch(a){case this.xf:this.i("HALT");this.U();break;case this.qd:a=this.d;for(var b="";a<this.a.length;){var c=this.a[a++];if(!c)break;b+=String.fromCharCode(c)}this.d=a;b=b.replace(/%A/g,n(this.e)).replace(/%X/g,n(this.n)).replace(/%Y/g,n(this.q));this.i(b);Da(this);break;default:this.d-=2,this.i("undefined opSim: "+n(a)+" at "+p(this.d)),this.U()}};f.j=function(){var a=this.a[--this.d];this.i("undefined opcode: "+n(a)+" at "+p(this.d));this.U()};
x(function(){for(var a=F(window.document,"c1pjs","cpu"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new ra(d);E(d,c)}});function R(a){z.call(this,"C1PROM",a);this.ua=this.a=null;this.Ra=a.size;if(this.ub=a.image){a=this.ub;var b;b=this.ub;var c="",d=b.lastIndexOf(".");0<=d&&(c=b.substr(d+1).toLowerCase());b=c;"json"!=b&&"hex"!=b&&(a="http://"+window.location.host+"/api/v1/dump?file="+this.ub);s(a,this,this.Jf)}}B(R);
R.prototype.W=function(a,b,c,d){this.a=a;this.Hc=b;a=c-b+1;this.Ra||(this.Ra=a);a!=this.Ra?K(this,"computer-specified ROM size ("+p(a)+") does not match component-specified size ("+p(this.Ra)+")"):(d&&(this.l=d,N(d,b,c,this,this.P)),Ha(this))};R.prototype.ca=function(a,b){a&&!this.o.C&&(this.o.C=!0,this.m=L(b,"debugger"))};R.prototype.P=function(a,b){if(void 0!==b){this.m&&S(this.m,this,a,b,this.m.ec,!0);var c=a-this.Hc;this.a[this.Hc+c]=this.ua?this.ua[c]:0}};
R.prototype.Jf=function(a,b,c){if(c)this.i('Error loading ROM "'+a+'" ('+c+")");else{if("["==b[0])try{this.ua=eval("("+b+")")}catch(d){this.i('Error processing ROM "'+a+'": '+d.message);return}else for(a=b.replace(/\n/gm," ").replace(/ +$/,"").split(" "),this.ua=Array(a.length),b=0;b<a.length;b++)this.ua[b]=parseInt(a[b],16);Ha(this)}};
function Ha(a){if(!J(a))if(!a.ub)a.Q();else if(a.ua&&a.a){var b=a.ua.length;if(b!=a.Ra)K(a,"ROM image size ("+p(b)+") does not match component-specified size ("+p(a.Ra)+")");else{for(var c=0;c<b;c++)a.a[a.Hc+c]=a.ua[c];a.Q()}}}x(function(){for(var a=F(window.document,"c1pjs","rom"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new R(d);E(d,c)}});function Ia(a){z.call(this,"C1PRAM",a)}B(Ia);Ia.prototype.W=function(a){this.a=a;this.Q()};
x(function(){for(var a=F(window.document,"c1pjs","ram"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new Ia(d);E(d,c)}});
function Ja(a){z.call(this,"C1PKeyboard",a);this.o.C=!1;this.zc=a.model;this.Rc=8;this.He=9;this.Fe=10;this.Ee=13;this.Ge=16;this.De=17;this.Ae=18;this.Be=20;this.Sc=27;this.Ce=91;this.xe=this.Rc;this.ye=this.Fe;this.ue=this.Ee;this.Mc=this.Sc;this.T=224;this.p=this.Ge+this.T;this.Ab=this.De+this.T;this.dc=this.Ae+this.T;this.Nc=this.Be+this.T;this.Lc=0+this.T;this.ve=3;this.we=15;this.zb=1;this.yb=2;this.xb=4;this.bb=8;this.wb=64;this.cc=this.yb|this.xb|this.wb;this.pd=0;this.vf=1;this.uf=2;this.wf=
3;this.tf=4;this.Xf=8192;this.Uf=250;this.Vf=100;this.Sf=300;this.Oa=[];this.Oa["break"]=this.Lc;this.Oa.esc=this.Mc;this.Oa["ctrl-c"]=this.ve;this.Oa["ctrl-o"]=this.we;this.k=[];this.k[49]=30464;this.k[33]=30464+this.p;this.k[50]=30208;this.k[34]=30208+this.p;this.k[51]=29952;this.k[35]=29952+this.p;this.k[52]=29696;this.k[36]=29696+this.p;this.k[53]=29440;this.k[37]=29440+this.p;this.k[54]=29184;this.k[38]=29184+this.p;this.k[55]=28928;this.k[39]=28928+this.p;this.k[56]=26368;this.k[40]=26368+this.p;
this.k[57]=26112;this.k[41]=26112+this.p;this.k[48]=25856;this.k[58]=25600;this.k[42]=25600+this.p;this.k[45]=25344;this.k[61]=25344+this.p;this.k[46]=22272;this.k[62]=22272+this.p;this.k[108]=22016;this.k[76]=22016+this.p;this.k[92]=22016+this.p;this.k[111]=21760;this.k[79]=21760+this.p;this.k[this.xe]=21760+this.p;this.k[this.ye]=21504;this.k[this.ue]=21248;this.k[119]=18176;this.k[87]=18176+this.p;this.k[101]=17920;this.k[69]=17920+this.p;this.k[114]=17664;this.k[82]=17664+this.p;this.k[116]=17408;
this.k[84]=17408+this.p;this.k[121]=17152;this.k[89]=17152+this.p;this.k[117]=16896;this.k[85]=16896+this.p;this.k[105]=16640;this.k[73]=16640+this.p;this.k[115]=14080;this.k[83]=14080+this.p;this.k[100]=13824;this.k[68]=13824+this.p;this.k[102]=13568;this.k[70]=13568+this.p;this.k[103]=13312;this.k[71]=13312+this.p;this.k[104]=13056;this.k[72]=13056+this.p;this.k[106]=12800;this.k[74]=12800+this.p;this.k[107]=12544;this.k[75]=12544+this.p;this.k[91]=12544+this.p;this.k[120]=9984;this.k[88]=9984+
this.p;this.k[99]=9728;this.k[67]=9728+this.p;this.k[118]=9472;this.k[86]=9472+this.p;this.k[98]=9216;this.k[66]=9216+this.p;this.k[110]=8960;this.k[78]=8960+this.p;this.k[94]=8960+this.p;this.k[109]=8704;this.k[77]=8704+this.p;this.k[93]=8704+this.p;this.k[44]=8448;this.k[60]=8448+this.p;this.k[113]=5888;this.k[81]=5888+this.p;this.k[97]=5632;this.k[65]=5632+this.p;this.k[122]=5376;this.k[90]=5376+this.p;this.k[32]=5120;this.k[47]=4864;this.k[63]=4864+this.p;this.k[59]=4608;this.k[43]=4608+this.p;
this.k[112]=4352;this.k[80]=4352+this.p;this.k[64]=4352+this.p;this.k[this.Ab]=1536;this.k[this.Mc]=1280;this.k[this.p]=512;this.k[this.dc]=256;this.k[this.Nc]=0;this.reset()}B(Ja);f=Ja.prototype;f.reset=function(){this.vb(this.zc);this.B=this.zb;this.zd=0;this.N=[this.zb,0,0,0,0,0,0,0];this.lc=[];if(this.ea)for(var a in this.ea)isNaN(a)||this.ea[a]&&clearTimeout(this.ea[a]);this.ea=[];this.he=this.ya=0;this.Ad=-1;this.yd=this.N;this.Ld=this.Ec=0;this.Ka=""};
f.J=function(a,b,c,d){if(void 0===this.s[c])switch(c){case "keyDown":return this.s[c]=d,d.onkeydown=function(a){return function(b){return Ka(a,b,!0)}}(this),!0;case "keyPress":return this.s[c]=d,d.onkeypress=function(a){return function(b){var c=!0;b=b||window.event;b=b.which||b.keyCode;a.Ka="";a.B&a.bb?a.B&=~a.bb:c=!La(a,b);a.m&&T(a.m,a.m.Aa)&&a.m.message("keyPress("+n(b)+"): "+(c?"pass":"consume"));return c}}(this),!0;case "keyUp":return this.s[c]=d,d.onkeyup=function(a){return function(b){return Ka(a,
b,!1)}}(this),!0;case "break":return this.s[c]=d,d.onclick=function(a){return function(){a.O&&a.O.reset(!0)}}(this),!0;default:if(void 0!==this.Oa[c])return this.s[c]=d,d.onclick=function(a,b,c){return function(){a.l&&a.l.X();return!La(a,c)}}(this,c,this.Oa[c]),!0}return!1};f.W=function(a,b,c,d){this.a=a;this.Qd=b;this.Ff=c-b+1;this.ag=this.Qd+this.Ff;d&&(this.l=d,N(d,b,c,this,this.P));this.Q()};f.vb=function(a){this.sb=a;this.rc=255;600!=this.sb&&(this.rc=0,this.i("updated keyboard model: "+this.sb))};
f.ca=function(a,b){a&&!this.o.C&&(this.o.C=!0,this.O=b,this.m=L(b,"debugger"))};f.Q=function(){this.wc=(this.Nf=u("iOS"))||u("Android");this.m&&T(this.m,this.m.Aa)&&this.m.message("mobile keyboard support: "+(this.wc?"true":"false")+" ("+window.navigator.userAgent+")");z.prototype.Q.call(this)};function Ma(a,b){var c=b?a.Vf:a.Uf;a.l&&a.l.va&&(c/=a.l.va);return c}
function Na(a,b){!a.ya||void 0!==b&&b==a.ya||(a.m&&T(a.m,a.m.Aa)&&a.m.message("autoClear("+n(a.ya)+")"),clearTimeout(a.ea[a.ya]),U(a,a.ya,!1,a.tf))}function V(a,b,c){a.Ka=b;Oa(a,c||a.Sf)}function Oa(a,b){if(0<a.Ka.length){var c=a.Ka.charCodeAt(0);10==c&&(c=13);65<=c&&90>=c&&(c+=32);a.Ka=a.Ka.substr(1);La(a,c)}0<a.Ka.length&&setTimeout(function(a){return function(){Oa(a,b)}}(a),b)}
function Ka(a,b,c){var d,e=!c;b=b.keyCode;c&&(a.he=b);b==a.p-a.T?(a.B&=~a.xb,c&&(a.B|=a.xb),b+=a.T,e=!1):b==a.dc-a.T?(a.B&=~a.yb,c&&(a.B|=a.yb),b+=a.T,e=!1):b==a.Ab-a.T?(a.B&=~a.wb,c&&(a.B|=a.wb),b+=a.T,e=!1):b==a.Nc-a.T?(c=!c,a.B&=~a.zb,c&&(a.B|=a.zb),b+=a.T,e=!1):b==a.Ce?(a.B&=~a.bb,c&&(a.B|=a.bb),e=!1,d=!0):d=b==a.He?e=!1:b==a.Sc||b==a.Rc?c?!La(a,b):!1:!0;e&&(a.B&=~a.bb,a.wc||b!=a.he||Na(a));void 0===d&&(d=!U(a,b,c,a.uf));a.m&&T(a.m,a.m.Aa)&&a.m.message("key"+(c?"Down":"Up")+"("+n(b)+"): "+(d?
"pass":"consume"));return d}function La(a,b){var c=!1;b==a.Lc?a.O&&(a.O.reset(!0),c=!0):(a.wc&&65<=b&&90>=b&&(b+=32),Na(a,b),U(a,b,!0,a.pd)&&(a.l.speed==a.l.Na?U(a,b,!1,a.vf):(c=!1,a.ea[b]&&(clearTimeout(a.ea[b]),c=!0),c=Ma(a,c),a.ea[a.ya=b]=setTimeout(function(a){return function(){U(a,b,!1,a.wf)}}(a),c),a.m&&T(a.m,a.m.Aa)&&a.m.message("keyPressSimulate("+n(b)+"): setTimeout()")),c=!0));a.m&&T(a.m,a.m.Aa)&&a.m.message("keyPressSimulate("+n(b)+"): "+(c?"true":"false"));return c}
function U(a,b,c,d){var e=!1;c||(a.ea[b]=null,a.ya==b&&(a.ya=0));var g=0,h=a.k[b];void 0===h&&(1<=b&&26>=b&&(b+=64,g=a.Ab),h=a.k[b]);void 0!==h&&(b=h>>12,e=h>>8&15,g||(g=h&255),c?(a.N[b]|=1<<e,a.N[0]=g==a.Ab?a.N[0]|a.wb:g==a.p?a.N[0]|a.xb:g==a.dc?a.N[0]|a.yb:a.N[0]&~a.cc):(a.N[b]&=~(1<<e),a.N[0]&=~a.cc,a.N[0]|=a.B&a.cc),c=d==a.pd&&!a.lc.length,a.lc.push(a.N.slice()),a.bc(c),e=!0);return e}f.I=function(){};f.P=function(a){var b=this.l.I(a);this.zd=b^this.rc;this.Ec++;this.bc(!1,a,b)};
f.bc=function(a,b){var c=Ea(this.l);if(!a)if(this.l.speed==this.l.Na)a=void 0!==b&&32<=this.Ec;else{var d=c-this.Ld;a=0>d||d>=this.Xf}a&&(d=this.lc.shift(),void 0!==d&&(this.yd=d),this.Ec=0,this.Ld=c);for(d=c=0;8>d;d++)this.zd&1<<d&&(c|=this.yd[d]);c^=this.rc;if(void 0!==b)this.a[b]=c;else if(b=this.Qd,c!=this.Ad)for(d=b;d<this.ag;d++)this.a[d]=c;this.Ad=c};x(function(){for(var a=F(window.document,"c1pjs","keyboard"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new Ja(d);E(d,c)}});
function Pa(a,b,c,d){z.call(this,"C1PVideo",a);this.zc=a.model;this.Md=a.charCols;this.Nd=a.charRows;this.Kf=a.screenWidth;this.Lf=a.screenHeight;this.Pb=a.charWidth;this.Qb=a.charHeight;Qa(this);this.Rb=b;this.If=c;this.mb=d;this.kb=56832}B(Pa);f=Pa.prototype;f.reset=function(a){this.vb(this.zc);if(this.a)for(var b=this.Zb;b<this.Ic;b++)this.a[b]=a?Math.floor(256*Math.random()):32};
f.J=function(a,b,c,d){switch(c){case "refresh":return this.s[c]=d,d.onclick=function(a){return function(){Ra(a);ta(a)}}(this),!0}return!1};f.W=function(a,b,c,d){this.a=a;this.Zb=b;this.Hf=c-b+1;this.Ic=this.Zb+this.Hf;d&&(this.l=d,void 0!==this.kb&&(ua(d,this.kb,this.kb,this,this.I),N(d,this.kb,this.kb,this,this.P)));this.reset(!0)};
function Qa(a,b,c,d,e){a.Wb=void 0!==b?b:a.Md;a.Yf=void 0!==c?c:a.Nd;a.Sa=a.Wb*a.Yf;a.Ic=a.Zb+a.Sa;a.Fd=void 0!==d?d:0;a.Od=void 0!==e?e:c;a.Bd=Math.floor(a.Kf/a.Wb);a.Cd=Math.floor(a.Lf/a.Od)}f.X=function(){this.Rb.focus()};f.vb=function(a){this.sb=a;600==this.sb?(Qa(this,this.Md,this.Nd,4,24),1024==this.Sa&&this.l&&(this.Lb=this.Ic+this.Sa-1,N(this.l,this.Lb,this.Lb,this,this.me))):(this.i("updated video model: "+this.sb),Qa(this,64,32));Ra(this);ta(this)};
f.ca=function(a,b){if(a&&!this.o.C&&J(this)){if(this.o.C=!0,this.m=L(b,"debugger"),this.H=L(b,"keyboard"))this.H.J("input","canvas","keyDown",this.Rb),this.H.J("input","canvas","keyPress",this.Rb),this.H.J("input","canvas","keyUp",this.Rb)}else!a&&this.o.C&&(this.o.C=!1)};f.Q=function(){this.Pb||(this.Pb=Math.floor(this.mb.width/16));this.Qb||(this.Qb=Math.floor(this.mb.height/16));z.prototype.Q.call(this)};
f.I=function(a,b){var c=this.l.I(a);void 0!==b&&this.m&&S(this.m,this,a,b,this.m.Bb);this.l.P(a,c&127|(Math.floor(Ea(this.l)/8333)&1?128:0))};f.P=function(a,b){void 0!==b&&this.m&&S(this.m,this,a,b,this.m.Bb)};
f.me=function(a,b){if(void 0!==b){this.m&&S(this.m,this,a,b,this.m.Bb,!0);this.vb(540);this.H&&this.H.vb(542);var c=this.l,d=c.ta,e=[],g=va(d,this.Lb,this.Lb,this,this.me);if(0<=g){e.push(d[g][0]);e.push(d[g][1]);d.splice(g,1);for(var h=65536,k=0,g=0;g<d.length;g++)h>d[g][0]&&(h=d[g][0]),k<d[g][1]&&(k=d[g][1]);e.push(h);e.push(k)}4==e.length&&(c.Mb=e[2],c.Nb=e[3])}};function Ra(a){a.mc=Array(a.Sa);for(var b=0;b<=a.Sa;b++)a.mc[b]=-1}
function ta(a){var b=0;if(a.o.C)for(;b<a.Sa;){var c=a.a[a.Zb+b];if(a.mc[b]!=c){var d=Math.floor(b/a.Wb);if(d>=a.Fd&&(d-=a.Fd,d<a.Od)){var e=c*a.Pb;a.If.drawImage(a.mb,e%a.mb.width,Math.floor(e/a.mb.width)*a.Qb,a.Pb,a.Qb,b%a.Wb*a.Bd,d*a.Cd,a.Bd,a.Cd)}a.mc[b]=c}b++}}
x(function(){for(var a=F(window.document,"c1pjs","video"),b=0;b<a.length;b++){var c=a[b],d=D(c),e=window.document.createElement("canvas");if(void 0===e){c.innerHTML="<br/>Missing &lt;canvas&gt; support; try a new web browser.";break}e.setAttribute("class","c1pjs-canvas");e.setAttribute("width",d.screenWidth);e.setAttribute("height",d.screenHeight);e.setAttribute("contenteditable","true");e.setAttribute("autocapitalize","off");e.setAttribute("autocorrect","off");e.style.backgroundColor=d.screenColor;
e.style.height="auto";0<=(window?window.navigator.userAgent:"").indexOf("MSIE")&&(e.style.height=(c.clientWidth*d.screenHeight/d.screenWidth|0)+"px",c.onresize=function(a,b,c,d){return function(){b.style.height=(a.clientWidth*d/c|0)+"px"}}(c,e,d.screenWidth,d.screenHeight));c.appendChild(e);var g=new Image,h=e.getContext("2d"),e=new Pa(d,e,h,g);g.onload=function(a){return function(){a.Q()}}(e,d.charSet);g.src=d.charSet;E(e,c)}});
function Sa(a){z.call(this,"C1PSerialPort",a);this.o.C=!1;this.Ed=a.demo;this.zf=0;this.yf=1;this.reset()}B(Sa);f=Sa.prototype;f.reset=function(){if(2!=this.Ga){this.Ob=this.qc=0;var a=1;if(this.Hd){var b=this.Hd.match(/\d+/);null!==b&&(a=parseInt(b[0],10))}this.ab='10 PRINT "HELLO OSI #'+a+'"\n';this.Ga=this.Vb=0}};f.start=function(){this.H&&this.Ed&&(V(this.H," C\n\n",3E3),setTimeout(function(a){return function(){a.Ga=1;V(a.H,"LOAD\n")}}(this),12E3));this.Ed=!1};
f.J=function(a,b,c,d){switch(c){case "listSerial":return this.s[c]=d,!0;case "loadSerial":return this.s[c]=d,d.onclick=function(a){return function(){a.s.listSerial&&s(a.s.listSerial.value,a,a.Qf)}}(this),!0}return!1};f.W=function(a,b,c,d){this.a=a;this.Gc=b;this.Gf=c-b+1;this.Rd=this.Gc+this.Gf;if(this.l=d)ua(d,b,c,this,this.I),N(d,b,c,this,this.P);this.Q()};f.ca=function(a,b){a&&!this.o.C&&(this.o.C=!0,this.O=b,this.H=L(b,"keyboard"),this.m=L(b,"debugger"))};
f.Qf=function(a,b,c){b?(this.ab=b,this.Ga=this.Vb=0,this.O&&this.H&&this.l.o.ha?(this.i("auto-loading "+a),this.l.X(),"."!=this.ab.charAt(0)?(this.Ga=1,V(this.H,"NEW\nLOAD\n")):(this.Ga=2,this.O.reset(!0),V(this.H,"ML"))):this.i(a+" ready to load")):this.i(a+" load error ("+c+")")};f.I=function(a,b){void 0!==b&&(a&1?Ta(this):this.ab&&!this.Vb&&Ta(this))};f.P=function(a,b){void 0!==b&&this.m&&S(this.m,this,a,b,this.m.Tc,!0)};
function Ta(a){if(void 0!==a.ab){a.qc=0;a.Ob=0;if(a.Vb<a.ab.length){var b=a.ab.charCodeAt(a.Vb++);10==b&&(b=13);a.qc=b;a.Ob=1}else 1==a.Ga&&a.H&&V(a.H," \nRUN\n"),a.Ga=0;a.bc()}}f.bc=function(){var a;for(a=this.Gc+0;a<this.Rd;a+=2)this.a[a]=this.Ob?this.yf:this.zf;for(a=this.Gc+1;a<this.Rd;a+=2)this.a[a]=this.Ob?this.qc:0};x(function(){for(var a=F(window.document,"c1pjs","serial"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new Sa(d);E(d,c)}});
function Ua(a){z.call(this,"C1PDiskController",a);this.o.C=!1;this.qf=this.nd=0;this.kd=1;this.rf=this.od=2;this.ld=3;this.Oc=128;this.Pc=64;this.La=4;this.lf=1;this.fd=2;this.kf=4;this.nf=8;this.mf=16;this.gd=32;this.ed=64;this.kc=128;this.jd=4;this.hd=8;this.of=32;this.sf=this.pf=16;this.md=17;this.Qc=3;this.ud=1;this.vd=2;this.td=4;this.sd=8;this.ze=0;this.Ie=40;this.reset(!0)}B(Ua);f=Ua.prototype;
f.reset=function(a){Va(this);this.L=-1;a&&(this.V=[],this.V[0]={Zi:this.ze,Pd:this.Ie,Mf:!0,Ya:20,ia:0,Wa:-1,Kb:[]})};
function Va(a){a.ie={t:a.ed,ba:function(){},update:function(a){return function(c){void 0!==c&&(this.t=c);a.$b.t&a.La||W(a,a.qf,this)}}(a)};a.Ia={t:255,ba:function(){this.update()},update:function(a){return function(c){void 0===c?c=a.Ia.t:Wa(a,c,a.tb.t);c=c|a.kc|a.gd|a.nf|a.kf|a.fd|a.mf;c&=~a.lf;if(0<=a.L&&a.V[a.L].Kb.length){var d=a.V[a.L];d.Mf&&(c&=~a.gd);d.ia||(c&=~a.fd);10>=--d.Ya&&(0<d.Ya?(c&=~a.kc,Xa(a)):(d.Ya=100,0<=a.L&&(a.V[a.L].Wa=0,Ya(a))))}this.t=c;a.$b.t&a.La&&W(a,a.nd,this)}}(a)};a.$b=
{t:0,ba:function(){},update:function(a){return function(c){void 0!==c&&(this.t=c&~(a.Oc|a.Pc));W(a,a.kd,this);a.Ia.update();a.ie.update()}}(a)};a.je={t:255,ba:function(){},update:function(a){return function(c){void 0!==c&&(this.t=c);a.ac.t&a.La||W(a,a.rf,this)}}(a)};a.tb={t:255,ba:function(){},update:function(a){return function(c){void 0===c?c=a.tb.t:Wa(a,a.Ia.t,c);if(0<=a.L&&a.L<a.V.length){var d=a.V[a.L];d.Kb.length&&a.tb.t&a.hd&&!(c&a.hd)&&(c&a.jd?d.ia--:d.ia++,a.m&&T(a.m,a.m.Ma)&&a.m.message("stepping "+
(c&a.jd?"down":"up")+" to track "+d.ia),d.ia>=d.Pd&&(d.ia=d.Pd),0>d.ia&&(d.ia=0),d.Ya=20,a.Ia.update(a.Ia.t|a.kc),Xa(a))}this.t=c;a.ac.t&a.La&&W(a,a.od,this)}}(a)};a.ac={t:0,ba:function(){},update:function(a){return function(c){void 0!==c&&(this.t=c&~(a.Oc|a.Pc));W(a,a.ld,this);a.tb.update();a.je.update()}}(a)};a.Wi={t:0,ba:function(){},update:function(a){return function(c){void 0!==c&&((c&a.Qc)==a.Qc&&(a.Ja.t=a.vd|a.td|a.sd),this.t=c);a.Ja.update()}}(a)};a.Ja={t:a.vd|a.td|a.sd,ba:function(){},update:function(a){return function(c){void 0===
c&&(c=a.Ja.t);c&=~a.ud;0<=a.L&&0<=a.V[a.L].Wa&&(c|=a.ud);this.t=c;W(a,a.sf,this)}}(a)};a.Kc={t:0,ba:function(a){return function(){Ya(a)}}(a),update:function(a){return function(c){void 0!==c&&(this.t=c);W(a,a.md,this)}}(a)};a.Xi={t:0,ba:function(){},update:function(){return function(){}}(a)}}
f.J=function(a,b,c,d){switch(c){case "listDisk":return this.s[c]=d,!0;case "loadDisk":return this.s[c]=d,d.onclick=function(a){return function(){if(a.s.listDisk){var b=a.s.listDisk.value,c=b;".json"!=b.substr(b.length-5)&&(c="http://"+window.location.host+"/api/v1/dump?disk="+b);a.i("loading  "+ba(b)+"...");s(c,a,a.Pf)}}}(this),!0}return!1};f.W=function(a,b,c,d){this.a=a;this.nc=b;if(this.l=d)ua(d,b,c,this,this.I),N(d,b,c,this,this.P);this.Q()};
f.ca=function(a,b){a&&!this.o.C&&(this.o.C=!0,this.m=L(b,"debugger"))};
f.Pf=function(a,b,c){if(c)this.i("disk load error ("+c+")");else{c=[];this.i("mounting "+a+"...");try{if(c=eval("("+b+")"),c.length)if(c[0].length){var d=c[0];if(void 0===d[0].trackNum)this.i("data error: "+d[0]);else if(this.V[0]){for(b=0;b<d.length;b++){var e,g=d[b],h=g.sectors;if(void 0===(e=g.trackNum)||void 0===h)throw Error("track "+b+" missing data");e!=b&&t("track "+e+" out of order (expected "+b+")");c=[];var k,l,m;if(e){Za(c,g,"trackSig");$a(c,g);X(c,g,"trackType");for(var q=0;q<h.length;q++){k=
h[q];l=k.sectorData;X(c,k,"sectorSig");X(c,k,"sectorNum");X(c,k,"sectorPages");for(m=0;m<l.length;m++)c.push(l[m]);Za(c,k,"sectorEndSig")}}else for(k=h[0],l=k.sectorData,X(c,g,"trackLoad",2),X(c,k,"sectorPages"),m=0;m<l.length;m++)c.push(l[m]);d[e].le=c;this.m&&T(this.m,this.m.Ma)&&this.m.message("track "+e+": "+c.length+" bytes")}this.V[0].Kb=d;this.i("mount of "+a+" complete")}else this.i("no available drives")}else this.i("no tracks: "+a);else this.i("no data: "+a)}catch(G){this.i("disk data error: "+
G.message)}}};function $a(a,b){var c=b.trackNum;if(void 0===c)throw Error("missing bcd value: trackNum");a.push(Math.floor(c/10)<<4|c%10)}function X(a,b,c,d){b=b[c];if(void 0===b)throw Error("missing binary value: "+c);2==d&&a.push(b>>8&255);a.push(b&255)}function Za(a,b,c){b=b[c];if(void 0===b)throw Error("missing signature: "+c);for(c=0;c<b.length;c++)a.push(b.charCodeAt(c))}
function ab(a,b,c){b&=63;16>b?b&=3:32>b&&(b&=17);switch(b){case a.nd:a=a.$b.t&a.La?a.Ia:a.ie;break;case a.kd:a=a.$b;break;case a.od:a=a.ac.t&a.La?a.tb:a.je;break;case a.ld:a=a.ac;break;case a.pf:a=c?a.Wi:a.Ja;break;case a.md:a=a.Kc;break;default:a=a.Xi}return a}f.I=function(a,b){if(void 0!==b){var c=ab(this,a-this.nc,!1);this.m&&S(this.m,this,a,b,this.m.Ma,!1,c.ke);c.ba()}};
f.P=function(a,b){if(void 0!==b){var c=this.l.I(a),d=ab(this,a-this.nc,!0);if(this.m&&T(this.m,this.m.Ma|this.m.ec)&&(S(this.m,this,a,b,this.m.Ma,!0,d.ke),d.Bf))for(var e=128,g=d.t^c;g&&e;)g&e&&this.m.message("  changed "+d.ke+"."+d.Bf[e]+" to "+(c&e?"1":"0")),e>>=1;d.update(c)}};function Wa(a,b,c){var d=-1;void 0!==b&&void 0!==c&&(d=0,c&a.of||(d|=2),a.Ia.t&a.ed||(d|=1));a.L!=d&&(a.L=d,a.Ja.update())}function Xa(a){0<=a.L&&(a.V[a.L].Wa=-1,a.Kc.update(255),a.Ja.update())}
function Ya(a){var b=null;if(0<=a.L){var b=a.V[a.L],c=b.Kb[b.ia];void 0!==c&&(0<=b.Wa&&b.Wa<c.le.length?(b.Ya=100,b=c.le[b.Wa++],a.Kc.update(b),a.Ja.update()):(b.Ya=10,Xa(a)))}}function W(a,b,c){a.l.P(b+a.nc,c.t)}x(function(){for(var a=F(window.document,"c1pjs","disk"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new Ua(d);E(d,c)}});
function bb(a){z.call(this,"C1PDebugger",a);this.Qa=-1;this.xa=0;this.Jc=null;this.Tb=!1;this.$=0;this.sa=[];this.Ca=[];this.Fa=[];this.lb=0;this.Ea=[];this.ga=[];this.ec=1;this.Aa=16;this.Bb=32;this.Ma=64;this.Tc=128;this.Ha=this.Je=0;this.Jb={port:this.ec,kbd:this.Aa,video:this.Bb,disk:this.Ma,serial:this.Tc};this.la=0;this.ma=1;this.cb=2;this.Wc=3;this.Xc=4;this.Yc=5;this.Zc=6;this.$c=7;this.ad=8;this.bd=9;this.Ke=10;this.cd=11;this.dd=12;this.Le=13;this.Me=14;this.Ne=15;this.Oe=16;this.na=17;
this.fc=18;this.gc=19;this.Eb=20;this.Qe=21;this.Re=22;this.oa=23;this.Fb=24;this.Se=25;this.Te=26;this.Gb=27;this.Hb=28;this.pa=29;this.eb=30;this.fb=31;this.gb=32;this.Ue=33;this.qa=34;this.Ve=35;this.We=36;this.Xe=37;this.Ye=38;this.hb=39;this.ib=40;this.Ze=41;this.$e=42;this.ra=43;this.af=44;this.bf=45;this.cf=46;this.Ba=47;this.ic=48;this.jc=49;this.df=50;this.ef=51;this.ff=52;this.gf=53;this.hf=54;this.jf=55;this.hc=56;this.Pe=57;this.jb="ADC AND ASL BCC BCS BEQ BIT BMI BNE BPL BRK BVC BVS CLC CLD CLI CLV CMP CPX CPY DEC DEX DEY EOR INC INX INY JMP JSR LDA LDX LDY LSR NOP ORA PHA PHP PLA PLP ROL ROR RTI RTS SBC SEC SED SEI STA STX STY TAX TAY TSX TXA TXS TYA SIM .DB".split(" ");
this.wd=["HLT","MSG"];cb(this,!0);this.Z=[[this.Ke],[this.qa,1,this.ja],[this.hc,1],[],[],[this.qa,1,this.F],[this.cb,1,this.F],[],[this.We],[this.qa,1,this.S],[this.cb,0,this.Cb],[],[],[this.qa,2,this.D],[this.cb,2,this.D],[],[this.bd,1,this.Y],[this.qa,1,this.ka],[],[],[],[this.qa,1,this.K],[this.cb,1,this.K],[],[this.Le],[this.qa,2,this.da],[],[],[],[this.qa,2,this.M],[this.cb,2,this.M],[],[this.Hb,2,this.Db],[this.ma,1,this.ja],[],[],[this.Zc,1,this.F],[this.ma,1,this.F],[this.hb,1,this.F],[],
[this.Ye],[this.ma,1,this.S],[this.hb,0,this.Cb],[],[this.Zc,2,this.D],[this.ma,2,this.D],[this.hb,2,this.D],[],[this.$c,1,this.Y],[this.ma,1,this.ka],[],[],[],[this.ma,1,this.K],[this.hb,1,this.K],[],[this.af],[this.ma,2,this.da],[],[],[],[this.ma,2,this.M],[this.hb,2,this.M],[],[this.Ze],[this.oa,1,this.ja],[],[],[],[this.oa,1,this.F],[this.gb,1,this.F],[],[this.Ve],[this.oa,1,this.S],[this.gb,0,this.Cb],[],[this.Gb,2,this.Db],[this.oa,2,this.D],[this.gb,2,this.D],[],[this.cd,1,this.Y],[this.oa,
1,this.ka],[],[],[],[this.oa,1,this.K],[this.gb,1,this.K],[],[this.Ne],[this.oa,2,this.da],[],[],[],[this.oa,2,this.M],[this.gb,2,this.M],[],[this.$e],[this.la,1,this.ja],[],[],[],[this.la,1,this.F],[this.ib,1,this.F],[],[this.Xe],[this.la,1,this.S],[this.ib,0,this.Cb],[],[this.Gb,2,this.Uc],[this.la,2,this.D],[this.ib,2,this.D],[],[this.dd,1,this.Y],[this.la,1,this.ka],[],[],[],[this.la,1,this.K],[this.ib,1,this.K],[],[this.cf],[this.la,2,this.da],[],[],[],[this.la,2,this.M],[this.ib,2,this.M],[],
[],[this.Ba,1,this.ja],[],[],[this.jc,1,this.F],[this.Ba,1,this.F],[this.ic,1,this.F],[],[this.Re],[],[this.gf],[],[this.jc,2,this.D],[this.Ba,2,this.D],[this.ic,2,this.D],[],[this.Wc,1,this.Y],[this.Ba,1,this.ka],[],[],[this.jc,1,this.K],[this.Ba,1,this.K],[this.ic,1,this.Vc],[],[this.jf],[this.Ba,2,this.da],[this.hf],[],[],[this.Ba,2,this.M],[],[],[this.fb,1,this.S],[this.pa,1,this.ja],[this.eb,1,this.S],[],[this.fb,1,this.F],[this.pa,1,this.F],[this.eb,1,this.F],[],[this.ef],[this.pa,1,this.S],
[this.df],[],[this.fb,2,this.D],[this.pa,2,this.D],[this.eb,2,this.D],[],[this.Xc,1,this.Y],[this.pa,1,this.ka],[],[],[this.fb,1,this.K],[this.pa,1,this.K],[this.eb,1,this.Vc],[],[this.Oe],[this.pa,2,this.da],[this.ff],[],[this.fb,2,this.M],[this.pa,2,this.M],[this.eb,2,this.da],[],[this.gc,1,this.S],[this.na,1,this.ja],[],[],[this.gc,1,this.F],[this.na,1,this.F],[this.Eb,1,this.F],[],[this.Te],[this.na,1,this.S],[this.Qe],[],[this.gc,2,this.D],[this.na,2,this.D],[this.Eb,2,this.D],[],[this.ad,1,
this.Y],[this.na,1,this.ka],[],[],[],[this.na,1,this.K],[this.Eb,1,this.K],[],[this.Me],[this.na,2,this.da],[],[],[],[this.na,2,this.M],[this.Eb,2,this.M],[],[this.fc,1,this.S],[this.ra,1,this.ja],[],[],[this.fc,1,this.F],[this.ra,1,this.F],[this.Fb,1,this.F],[],[this.Se],[this.ra,1,this.S],[this.Ue],[],[this.fc,2,this.D],[this.ra,2,this.D],[this.Fb,2,this.D],[],[this.Yc,1,this.Y],[this.ra,1,this.ka],[],[],[],[this.ra,1,this.K],[this.Fb,1,this.K],[],[this.bf],[this.ra,2,this.da],[],[],[],[this.ra,
2,this.M],[this.Fb,2,this.M],[]]}B(bb);f=bb.prototype;f.J=function(a,b,c,d){var e=this;switch(c){case "debugInput":return this.Sb=this.s[c]=d,this.Sb.focus(),d.onkeypress=function(a,b){return function(d){13==d.keyCode&&(c=b.value,b.value="",db(a,c))}}(this,d),!0;case "debugEnter":return this.s[c]=d,fa(d,function(){return e.Sb?(c=e.Sb.value,db(e,c),!0):!1}),!0;case "step":return this.s[c]=d,fa(d,function(a){var b=!1;I(e,!0)||(H(e,!0),b=e.step(a?1:0),H(e,!1));return b}),!0}return!1};
f.W=function(a,b,c){this.a=a;this.aa=b;this.sc=c-b+1;this.$a=this.aa+this.sc;this.Q()};f.ca=function(a,b){a&&!this.o.C&&(this.o.C=!0,this.l=L(b,"cpu"))};f.X=function(){this.Sb.focus()};
function cb(a,b){a.Cb=0;a.S=1;a.M=2;a.da=3;a.Db=4;a.Uc=5;a.K=6;a.Vc=7;a.ja=8;a.ka=9;a.D=10;a.F=11;a.Y=a.Db;var c="",d,e;if(b)for(a.fa="A #$nn $nnnn,X $nnnn,Y $nnnn ($nnnn) $nn,X $nn,Y ($nn,X) ($nn),Y $nnnn $nn".split(" "),d=0;d<a.fa.length;d++)e=a.fa[d],c+="("+e.replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/nnnn/g,"[0-9A-F][0-9A-F][0-9A-F][0-9A-F]?").replace(/nn/g,"[0-9A-F][0-9A-F]?").replace(/\$/g,"\\$")+"|)";else for(a.fa="A nn [nnnn+X] [nnnn+Y] nnnn [nnnn] [nn+X] [nn+Y] [[nn+X]] [[nn]+Y] [nnnn] [nn]".split(" "),
d=0;d<a.fa.length;d++)e=a.fa[d],c+="("+e.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/nnnn/g,"[0-9A-F][0-9A-F][0-9A-F][0-9A-F]?").replace(/nn/g,"[0-9A-F][0-9A-F]?").replace(/\+/g,"\\+")+"|)";a.Yi=new RegExp(c);a.Cf=[a.Gb,a.Hb,a.bd,a.$c,a.cd,a.dd,a.Wc,a.Xc,a.ad,a.Yc]}f.U=function(){this.l.U()};function T(a,b){return(a.Ha&b)===b}function S(a,b,c,d,e,g,h){(a.Ha&e)==e&&(e=a.l.I(c),a.message(b.id+"."+(g?"setByte":"getByte")+"("+p(c)+")"+(void 0!==d?" @"+p(d):"")+": "+(h?h+"=":"")+n(e)))}
f.message=function(a){this.i(a);Da(this.l)};f.Of=function(){this.i("Type ? for list of debugger commands\n")};f.za=function(){if(!eb(this))return!1;this.l.za();return!0};f.step=function(a){if(!eb(this))return!1;var b;try{b=this.l.step(a)}catch(c){b=void 0,K(this.l,c.message||c)}void 0!==b&&this.Qa++;this.l.update(!0);this.update(!0);return b};f.update=function(a){this.xa=this.l.d;a||this.Va?fb(this):gb(this)};
function eb(a){a.l&&J(a.l)&&!I(a.l)?(a=a.l,a.o.Ua?(a.i(a.toString()+" error"),a=!0):a=!1,a=!a):a=!1;return a}f.reset=function(){var a;this.Ea.length||(this.Ea=Array(1E3));for(a=0;a<this.Ea.length;a++)this.Ea[a]=-1;this.ga.length||(this.ga=Array(256));for(a=0;a<this.ga.length;a++)this.ga[a]=[a,0];this.Qa&&this.update();this.Qa=0};f.start=function(){this.Va||this.i("running")};
f.stop=function(a,b){if(!this.Va&&(this.i("stopped"),b)){var c=r();this.i(c-a+"ms ("+b+" cycles)")}this.update();this.X();this.Va||(this.Qa=0);hb(this,this.l.d)};function ib(a,b){return a+(b<<24>>24)}f.I=function(a){var b;a>=this.aa&&a<this.$a&&(wa(this.l,a),b=this.a[this.aa+a],b&=255);return b};f.P=function(a,b){a<this.aa||a>=this.$a?this.i("invalid address: "+p(a)):(this.a[this.aa+a]=b&255,xa(this.l,a),this.l.update())};function jb(a,b){Y(a.sa,b,void 0)||a.sa.push(b);return!0}
function Y(a,b,c){for(var d=!1,e=0;e<a.length;e++)if(a[e]==b){c&&a.splice(e,1);d=!0;break}return d}function kb(a,b){void 0!==b&&(hb(a,a.Pa),jb(a,b)&&(a.Pa=b))}function hb(a,b){void 0!==a.Pa&&b==a.Pa&&Y(a.sa,a.Pa,!0)&&(a.Pa=void 0);a.Va=!1}function Ca(a,b,c,d){for(var e=!1,g=0;g<c.length;g++)if(c[g]==b){b!=a.Pa&&a.i("breakpoint hit: "+p(b)+" ("+d+")");e=!0;break}return e}
function lb(a,b,c){var d=p(b),e=a.I(b++),g=a.Z[e],h=void 0===e?0:e,k=[],l=void 0===g[1]?0:g[1];do{d+=" "+n(h);if(!l--)break;h=a.I(b++);if(void 0===h)break;k.push(h)}while(1);void 0===g[0]&&(g=[a.Pe,1,a.S],k.push(e));var d=(d+"        ").substr(0,15),d=d+a.jb[g[0]],m=null;if(void 0!==g[2]){l=g[2];m=a.fa[l];if(1==g[1]&&l==a.Y)m=m.replace(/nnnn/,p(ib(b,h=k.pop())));else for(;k.length;)m=m.replace(/nn/,n(h=k.pop()));l==a.S&&1==g[1]&&32<=h&&128>h&&(m+=" ;'"+String.fromCharCode(h)+"'")}if(e==a.l.hc&&(h<
a.wd.length&&(m=a.wd[h]),h==a.l.qd)){l=0;for(m='"';h=a.I(b++);)16>l?m+=String.fromCharCode(h):16==l&&(m+="\u2026"),l++;m+='"'}m&&(d+=" "+m);c&&(d=(d+"               ").substr(0,30),d+=";"+c.toString());a.$f=b;return d}
function Z(a,b){var c=a.xa;if(void 0!==b){var d=16;"$"==b.charAt(0)?b=b.substr(1):"0x"==b.substr(0,2)?b=b.substr(2):"."==b.charAt(b.length-1)&&(d=10,b=b.substr(0,b.length-1));c=parseInt(b,d);isNaN(c)&&(a.i("invalid base-"+d+" address: "+b),c=void 0)}void 0!==c&&(c<a.aa||c>=a.$a)&&(a.i("address out of range: "+aa(c)),c=void 0);return c}
function mb(a,b){if("?"==b)a.i("\nfrequency commands:"),a.i("clear\tclear all frequency counts");else{var c=0,d;if(a.ga)if("clear"==b){for(d=0;d<a.ga.length;d++)a.ga[d]=[d,0];a.i("frequency data cleared");c++}else if(void 0!==b)a.i("unknown frequency command: "+b),c++;else{var e=a.ga.slice();e.sort(function(a,b){return b[1]-a[1]});for(d=0;d<e.length;d++){var g=e[d][0],h=e[d][1];h&&(a.i(a.jb[a.Z[g][0]]+" ("+n(g)+"): "+h+" times"),c++)}}c||a.i("no frequency data available")}}
function fb(a,b,c,d){var e=Z(a,b);if(void 0!==e){void 0===d&&(d=1);b=a.$a;if(void 0!==c){b=Z(a,c);if(void 0===b||b<e)return;if(256<b-e){a.i("range too large");return}b++;d=-1}for(e!=a.xa&&a.i();d--&&e<b;)c=lb(a,e,I(a,!1)||a.Va?a.Qa:0),a.i(c),a.xa=e=a.$f}}
function gb(a,b){if(b&&"?"==b[1])a.i("\nregister commands:"),a.i("r to display all"),a.i("r [target=value] to modify"),a.i("supported targets:"),a.i("A,X,Y,S,PC and flags C,Z,D,V,N");else{var c=!0;if(void 0!==b&&1<b.length){var c=!1,d=b[1],e=null,g=d.indexOf("=");if(0<g)e=d.substr(g+1),d=d.substr(0,g);else if(2<b.length)e=b[2];else{a.i("missing value for "+b[1]);return}g=parseInt(e,16);if(isNaN(g)){a.i("invalid value: "+e);return}switch(d.toUpperCase()){case "A":a.l.e=g&255;break;case "X":a.l.n=g&
255;break;case "Y":a.l.q=g&255;break;case "C":a.l.c=g?256:0;break;case "Z":a.l.g=g?0:1;break;case "D":g?Fa(a.l):Ga(a.l);break;case "V":g?(d=a.l,d.v=0,d.w=128):(d=a.l,d.v=0,d.w=0);break;case "N":a.l.f=g?128:0;break;case "S":if(256!=(g&-256)){a.i("invalid stack pointer: "+e);return}a.l.r=g;break;case "PC":c=!0;a.l.d=g&65535;a.xa=a.l.d;break;default:a.i("unknown register: "+d);return}a.l.update()}a.i("A="+n(a.l.e)+" X="+n(a.l.n)+" Y="+n(a.l.q)+" P="+n(Aa(a.l))+" S="+p(a.l.r)+" PC="+p(a.l.d));c&&fb(a,
p(a.xa=a.l.d))}}function nb(a,b){var c=void 0===b?1:parseInt(b,10),d=1==c?0:1;ea(c,function(a){return function(){return H(a,!0)&&a.step(d)}}(a),function(a){return function(){H(a,!1)}}(a))}
function db(a,b){b.length||(a.Tb?(a.i("ended assemble @"+p(a.$)),a.xa=a.$,a.Tb=!1):a.Jc&&(b=a.Jc));if(J(a)&&!I(a,!0)&&0<b.length){a.Tb?b="a "+p(a.$)+" "+b:1<b.length&&1!=b.indexOf(" ")&&(b=b.charAt(0).toLowerCase()+" "+b.substr(1));var c=b.split(" ");a.Jc=c[0];switch(c[0].toLowerCase()){case "a":var d=Z(a,c[1]);if(void 0!==d)if(a.$=d,void 0===c[2])a.i("begin assemble @"+p(a.$)),a.Tb=!0,a.l.update();else{var e,g=c[2],h=c[3],c=a.$,d=[];if(void 0!==g){var k,g=g.toUpperCase();"?"==g.charAt(g.length-1)&&
(h="?",g=g.substr(0,g.length-1));for(k=0;k<a.jb.length&&g!=a.jb[k];k++);k==a.jb.length&&(a.i("unknown operation: "+g),k=-1);var l="",m;if(0<=k&&void 0!==h)if(l=h.toUpperCase(),"?"==l){for(h=m=0;h<a.Z.length;h++)a.Z[h][0]===k&&(m||a.i("supported opcodes:"),a.i("     "+n(h)+": "+g+(void 0!==a.Z[h][2]?" "+a.fa[a.Z[h][2]]:"")),m++);k=-1}else if(m=l.match(a.Yi),null!==m&&m[0]==l){for(h=1;h<m.length;h++)if(m[h]==l)if(void 0===e)e=h-1;else{a.i("too many operand matches (both "+a.fa[e]+" and "+a.fa[h-1]+
")");k=-1;break}e==a.Db&&0>a.Cf.indexOf(k)&&(e=a.D);e==a.Uc&&k!=a.Gb&&(e=a.D)}else a.i("unknown operand: "+l),k=-1;if(0<=k){m=-1;for(h=0;h<a.Z.length;h++)if(a.Z[h][0]===k&&a.Z[h][2]===e)if(0>m)m=h;else{a.i("too many instruction matches (both "+n(m)+" and "+n(h)+")");m=-2;break}if(0<=m){if(d.push(m),void 0!==e)if(g=a.Z[m][1],l=l.match(/[0-9A-F]+/),null!==l)for(l=parseInt(l[0],16),1==g&&e==a.Y&&(l-=c+2,-128>l||127<l)&&(a.i("branch out of range ("+l+")"),d=[],g=0),h=0;h<g;h++)d.push(l&255),l>>>=8;else g&&
a.i("instruction missing "+g+" bytes")}else a.i("unknown instruction: "+g+" "+l+"")}}e=d;if(e.length){for(c=0;c<e.length;c++)a.P(a.$+c,e[c]);a.i(lb(a,a.$));a.$+=e.length}}break;case "b":e=c[1];c=c[2];if(void 0===e||"?"==e)a.i("\nbreakpoint commands:"),a.i("bp [a]\tset exec breakpoint at [a]"),a.i("br [a]\tset read breakpoint at [a]"),a.i("bw [a]\tset write breakpoint at [a]"),a.i("bc [a]\tclear breakpoint at [a]"),a.i("bl\tlist all breakpoints");else if(void 0===c&&1<e.length&&(c=e.substr(1),e=e.substr(0,
1)),"l"==e){e=0;d=a.sa;for(c=0;c<d.length;c++)a.i("breakpoint enabled: "+p(d[c])+" (exec)"),e++;d=a.Ca;for(c=0;c<d.length;c++)a.i("breakpoint enabled: "+p(d[c])+" (read)"),e++;d=a.Fa;for(c=0;c<d.length;c++)a.i("breakpoint enabled: "+p(d[c])+" (write)"),e++;e||a.i("no breakpoints")}else void 0===c?a.i("missing breakpoint address"):"c"==e&&"*"==c?(a.sa=[],a.Ca=[],a.Fa=[],a.i("all breakpoints cleared")):(c=Z(a,c),void 0!==c&&("p"==e?jb(a,c)?a.i("breakpoint enabled: "+p(c)+" (exec)"):a.i("breakpoint not set: "+
p(c)):"c"==e?Y(a.sa,c,!0)?a.i("breakpoint cleared: "+p(c)+" (exec)"):Y(a.Ca,c,!0)?a.i("breakpoint cleared: "+p(c)+" (read)"):Y(a.Fa,c,!0)?a.i("breakpoint cleared: "+p(c)+" (write)"):a.i("breakpoint missing: "+p(c)):"r"==e?(Y(a.Ca,c,void 0)||a.Ca.push(c),a.i("breakpoint enabled: "+p(c)+" (read)")):"w"==e?(Y(a.Fa,c,void 0)||a.Fa.push(c),a.i("breakpoint enabled: "+p(c)+" (write)")):a.i("unknown breakpoint command: "+e)));break;case "d":e=c[1];d=c[2];if("?"==e)a.i("\ndump commands:"),a.i("d [a] [#]    dump # lines of memory");
else if(e=Z(a,e),void 0!==e){c=0;void 0!==d&&("l"==d.charAt(0)&&(d=d.substr(1)),c=parseInt(d,10));c||(c=1);for(d=0;d<c;d++){l=g="";h=e;for(k=0;8>k&&e<a.$a;k++)m=a.I(e),void 0===m&&(m=0),g+=n(m)+" ",l+=32<=m&&128>m?String.fromCharCode(m):".",e++;a.i(p(h)+" "+g+l)}a.xa=e}break;case "e":e=c[1];if(void 0===e)a.i("missing address");else if(e=Z(a,e),void 0!==e)for(d=2;d<c.length;d++)g=parseInt(c[d],16),a.P(e++,g);break;case "f":mb(a,c[1]);break;case "g":e=c[1];void 0!==e&&kb(a,Z(a,e));a.za()||a.l.X();break;
case "h":a.U();break;case "o":if(void 0===c[1]||"?"==c[1])a.i("\noption commands:"),a.i("max\trun at maximum speed"),a.i("fast\trun faster (up to "+a.l.nb+"Mhz)"),a.i("slow\trun at normal speed (1Mhz)"),a.i("classic\tuse classic operand syntax"),a.i("modern\tuse modern operand syntax"),a.i("msg\tenable message categories");else switch(e=c[1],e){case "slow":M(a.l,a.l.Ib);break;case "fast":M(a.l,a.l.rd);break;case "max":M(a.l,a.l.Na);break;case "classic":cb(a,!0);a.i("classic syntax enabled");break;
case "modern":cb(a,!1);a.i("modern syntax enabled");break;case "msg":e=0;void 0!==c[2]&&("all"==c[2]?e=255:void 0!==a.Jb[c[2]]&&(e=a.Jb[c[2]]),e&&("on"==c[3]?a.Ha|=e:"off"==c[3]&&(a.Ha&=~e)));for(d in a.Jb)if(void 0===c[2]||"all"==c[2]||c[2]==d)e=a.Jb[d],a.i(d+" messages: "+(a.Ha&e?"on":"off"));break;default:a.i("unknown option: "+e)}break;case "p":l=c[1];e=10;c=a.lb;d=a.Ea;if(void 0!==d){g=void 0===l?a.Zf:parseInt(l,10);void 0===g&&(g=10);g>d.length&&(a.i("note: only "+d.length+" available"),g=d.length);
void 0!==l&&(a.Ac=0,a.i(g+" instructions earlier:"));l=a.Ac?a.Ac:1;c-=g;for(0>c&&(c=d.length-1);e&&c!=a.lb;){h=d[c];if(0>h)break;a.i(lb(a,h,l++));++c==d.length&&(c=0);e--;g--}a.Zf=g;a.Ac=l}10==e&&a.i("no history available");break;case "r":gb(a,c);break;case "s":a.I(a.l.d)==a.l.Hb?(kb(a,a.l.d+3),a.Va=!0,a.za()||a.l.X()):nb(a);break;case "t":nb(a,c[1]);break;case "u":fb(a,c[1],c[2],8);break;case "?":case "help":a.i("\ncommands:\n?\thelp\na [#]\tassemble\nb [#]\tbreakpoint\nd [#]\tdump memory\ne [#]\tedit memory\nf\tdump frequencies\ng [#]\trun to [#]\nh\thalt\no\toptions\np [#]\tdump history\nr\tdump/edit registers\ns\tstep over instruction\nt [#]\tstep instruction(s)\nu [#]\tunassemble");
a.i("note: frequency and history commands operate only when breakpoints are set");break;default:a.i("unknown command: "+b)}}}x(function(){for(var a=F(window.document,"c1pjs","debugger"),b=0;b<a.length;b++){var c=a[b],d=D(c),d=new bb(d);E(d,c)}});function $(a,b){z.call(this,"C1PComputer",a);this.R=b}B($);$.prototype.reset=function(a){var b=null,c;for(c in this.R)for(var d=0;d<this.R[c].length;d++){var e=this.R[c][d];e&&e.reset&&(e.reset(),"cpu"==c&&(b=e))}b&&(b.update(),a&&b.za())};
$.prototype.start=function(){for(var a in this.R)if("cpu"!=a)for(var b=0;b<this.R[a].length;b++){var c=this.R[a][b];c&&c.start&&c.start()}};$.prototype.stop=function(a,b){for(var c in this.R)if("cpu"!=c)for(var d=0;d<this.R[c].length;d++){var e=this.R[c][d];e&&e.stop&&e.stop(a,b)}};$.prototype.J=function(a,b,c,d){switch(c){case "reset":return this.s[c]=d,d.onclick=function(a){return function(){a.reset()}}(this),!0}return!1};function L(a,b){return a.R[b]?a.R[b][0]:null}
function ob(a){var b=null,c;for(c in a.R)for(var d=0;d<a.R[c].length;d++){var e=a.R[c][d];if(e){if(!J(e)){J(e,function(a){return function(){ob(a)}}(a));return}"cpu"==c?b=e:e.ca&&e.ca(!0,a)}}a.Q();a.i("C1Pjs v1.15.9\nCopyright \u00a9 2012-2014 Jeff Parsons <Jeff@pcjs.org>");b&&b.ca(!0,a)}
x(function(){for(var a=F(window.document,"c1pjs","computer"),b=0;b<a.length;b++){for(var c=a[b],d=D(c),e,g={},h,k=0,l=0,m=0;m<d.modules.length;m++){var q=d.modules[m];if(!m){if("cpu"!=q.type)break;k=q.start;l=q.end;h=Array(l+1-k);for(e=k;e<h.length;e++)h[e]=0}if(e=C(q.refID,d.id)){var G=q.type;void 0===g[G]&&(g[G]=[]);g[G].push(e);e.W&&void 0!==q.start&&e.W(h,q.start,q.end,g.cpu[0])}else{t('no component for <module refid="'+q.refID+'">');return}}if(void 0===h){t('<module type="cpu"> definition must appear first in the <computer> specification');
break}if(e=C("debugger",d.id))g["debugger"]=[e],e.W&&e.W(h,k,l,g.cpu[0]);k=new $(d,g);if(l=C("panel",d.id))if(g.panel=[l],l.tc){e=d.id;d=void 0;g=[];e&&(e=0<(d=e.indexOf("."))?e.substr(0,d+1):"");for(d=0;d<A.length;d++)m=A[d],e&&m.id.indexOf(e)||g.push(m);d=g;for(g=0;g<d.length;g++)e=d[g],e!=l&&(e.Yb=l.Yb,e.i=l.i,e.tc=l.tc)}E(k,c);ob(k)}});var pb=0;function qb(a,b,c,d,e,g){e("Loading "+a+"...");s(a,null,function(h,k,l){l?(k||(k="unable to load "+a+" ("+l+")"),g(k,null)):rb(k,a,b,c,d,e,g)})}
function rb(a,b,c,d,e,g,h){function k(a,g){if(g)h(g,null);else{if(c){var k=b;k&&0>k.indexOf("/")&&(k=window.location.pathname+k);a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(d?" state=$2"+d+"$2":"")+(k?" url=$2"+k+"$2":""))}k=null;if("<"==a.charAt(0))try{window.ActiveXObject||"ActiveXObject"in window?(e||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),k=new window.ActiveXObject("Microsoft.XMLDOM"),k.async=!1,k.loadXML(a)):k=(new window.DOMParser).parseFromString(a,"text/xml")}catch(G){k=
null,a=G.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);h(a,k)}}a?e?sb(a,g,k):k(a,null):h("no data"+(b?" for file: "+b:""),null)}
function sb(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");s(e,null,function(g,h,k){if(k||!h)c(a,"unable to resolve XML reference: "+d[0]+" ("+k+")");else{if(g=d[3])if(k=h.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var l=k[0],m,q=/( [a-z]+=)(['"])(.*?)\2/g;m=q.exec(g);)l=0>l.indexOf(m[1])?l.replace(">",m[0]+">"):l.replace(new RegExp(m[1]+"(['\"])(.*?)\\1"),m[0]);k[0]!=l&&(h=h.replace(k[0],l))}else{c(a,"missing <"+d[1]+"> in "+e);return}h=h.replace(/<\?xml[^>]*>[\r\n]*/,
"");a=a.replace(d[0],h);sb(a,b,c)}})}else c(a,null)}
function tb(a,b,c){function d(a){if(void 0===k){var b=h&&F(h,"machine-warning");k=b&&b[0]||h}k&&(k.innerHTML=da(a))}function e(a){d("Error: "+a);l&&g();l=!1}function g(){0==--pb&&ia(!0)}var h,k,l=!0;pb++;try{if(h=window.document.getElementById(a)){c||(c="/versions/c1pjs/1.15.9/components.xsl");var m=function(a,k){if(k){var l=function(a,l){if(l)if(l)if(d("Processing "+b+"..."),window.ActiveXObject||"ActiveXObject"in window){var m=k.transformNode(l);m?(h.outerHTML=m,g()):e("transformNodeToObject failed")}else window.document.implementation&&
window.document.implementation.createDocument?(m=new XSLTProcessor,m.importStylesheet(l),(m=m.transformToFragment(k,window.document))?(h.parentNode.replaceChild(m,h),g()):e("transformToFragment failed")):e("unable to transform XML: unsupported browser");else e("failed to load XSL file: "+c);else e(a)};k?qb(c,null,null,!1,d,l):e("failed to load XML file: "+b)}else e(a)};"<"!=b.charAt(0)?qb(b,a,void 0,!0,d,m):rb(b,null,a,void 0,!1,d,m)}else e("failed to find machine element: "+a)}catch(q){e(q.message)}return l}
window.embedC1P=function(a,b,c){return tb(a,b,c)};window.enableEvents=ia;window.sendEvent=ja;ia(!1);})();//@ sourceMappingURL=/tmp/c1pjs/1.15.9/c1p-dbg.map
